---
import "../styles/global.css";
import Container from "../components/Elements/Container";
import BaseLayout from "../layouts/BaseLayout.astro";
import BlogPost from "../components/BlogPost.astro";
const allPosts = await Astro.glob("./posts/*.{md,mdx}");

console.log(allPosts);

const tags = [
    ...new Set(allPosts.map((post) => post?.frontmatter?.tags).flat()),
];

console.log("tags", tags);
console.log("tagsss");

const pageTitle: string = "Israel Chidera - Blog";


---

<BaseLayout pageTitle={pageTitle}>
    <section class="pt-10 pb-20 hero-img">
        <div>
            <Container>
                <div class="bg-center">
                    <p class="text-sm text-white text-center mb-2">Blog</p>

                    <div class="flex justify-center items-center">
                        <div class="xl:w-4/5 md:w-4/5 w-5/6 text-center">
                            <h1 class="text-4xl font-bold text-dark">
                                News and insights
                            </h1>
                            <p class="w-1/2 mx-auto">
                                Learn more about SEOs, backlinks and content
                                writing. Discover our lastest product updates,
                                patnership, announcement, user stories, and
                                more.
                            </p>
                        </div>
                    </div>
                </div>
            </Container>
        </div>

        <Container className="mt-20">
            <div>
                <div class="flex items-center space-x-4">
                    <div class="text-white border-b">
                        <a> All</a>
                    </div>

                    <div class="text-tertiary cursor-pointer text-sm">
                        <a> blog</a>
                    </div>

                    {
                        tags?.map((tag) => (
                            <div>
                                <a
                                    class="w-full block bg-dark text-tertiary py-2 px-2 text-sm text-center"
                                    href={`/tags/${tag}`}
                                >
                                    {tag}
                                </a>
                            </div>
                        ))
                    }
                </div>
            </div>

            <div
                class="mt-6 grid xl:grid-cols-4 md:grid-cols-3 grid-cols-1 gap-x-6 gap-y-10"
            >
                {
                    allPosts?.map((post) => (
                        <BlogPost
                            url={post.url}
                            title={post.frontmatter.title}
                            img={post.frontmatter.image?.url}
                            tags={post.frontmatter.tags}
                            post={post}
                        />
                    ))
                }                
                {
                    console.log(
                        "there too",
                        allPosts.filter(
                            (x) => x.frontmatter.tags === "writing",
                        ),
                    )
                }
                {
                    allPosts
                        .filter((x) => x.frontmatter.tags === "writing")
                        .map((post) => (
                            <BlogPost
                                url={post.url}
                                title={post.frontmatter.title}
                                img={post.frontmatter.image?.url}
                                tags={post.frontmatter.tags}
                                post={post}
                            />
                        ))
                }

             
            </div>
        </Container>
    </section>
</BaseLayout>
